<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Customize the Sample App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/UWPQuickStart/stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/UWPQuickStart/stylesheets/bootstrap.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/UWPQuickStart/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/UWPQuickStart/stylesheets/github-light.css" media="screen">
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
  </head>

  <body>
    <header role="banner">
		<nav class="navbar navbar-default navbar-fixed-top">
			<a class="navbar-brand" href="/UWPQuickStart/index.html"><img class="navbar-logo" src="/UWPQuickStart/images/VS_rgb_Wht.png"></a>
                <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="container-fluid">
                <div class="collapse navbar-collapse navbar_center" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="home"><a href="/UWPQuickStart/index.html">Home</a></li>
                        <li class="learn"><a class="active" href="/UWPQuickStart/docs/customize.html">Learn</a></li>
                        <li class="resources"><a href="/UWPQuickStart/docs/resources.html">Resources</a></li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
	   </nav>
    </header>
    <div class="top_navbar_spacer"></div>

     <div id="content" class="container main_content">
         <div class="col-md-4">
            <div class="row" style="position: fixed;">
                <div class="col-md-10" style="margin-left: 0px">
                    <h2 class="site-toc-title">Table of Contents</h2>
                    <ul class="site-toc">
                        <li>
                            <a class="this-page" href="/UWPQuickStart/docs/customize.html">
                                Customize the App
                            </a>
                        </li>
                        <li>
                            <a class="this-page" href="/UWPQuickStart/docs/challenges/online-image-sync.html">
                                Share Your Photos
                            </a>
                            <div id="page-toc" class="page-toc">
                                <ul>
                                    <li>
                                        <a href="/UWPQuickStart/docs/challenges/online-image-sync.html#Getting-imgur-key-anchor">Prerequisite: Getting Imgur API Key</a>
                                    </li>
                                    <li class="">
                                        <a href="/UWPQuickStart/docs/challenges/online-image-sync.html#Download-source-anchor">Download and Update Source</a>
                                    </li>
                                    <li>
                                        <a href="/UWPQuickStart/docs/challenges/online-image-sync.html#Add-pictures-anchor">Add Pictures</a>
                                    </li>
									<!--li>
                                        <a href="/UWPQuickStart/docs/challenges/online-image-sync.html#Download-Solution-anchor">Download Solution</a>
                                    </li-->
                                </ul>
                            </div>
                        </li>
                        <li>
                            <a class="this-page" href="/UWPQuickStart/docs/challenges/toast-notification.html">
                                Add Toast Notifications
                            </a>
                        </li>
                        <li>
                            <a class="this-page" href="/UWPQuickStart/docs/challenges/cortana-integration.html">
                                Add Cortana Support
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="site-toc-container">
                </div>
            </div>
        </div>
        <span class="doc-fragment-anchor" id=link-0"></span>
        <div class="col-md-8">
            <div class="row">
                <h1>Share Your Photos</h1>
                <p>
                    Now that we have customized the app for our own event, why don’t we make it so that all attendees can view and share photos with other app users? We really don’t want to force all of our attendees to register for some service, so let’s use Imgur’s RESTful APIs to implement a way for all users of our app to share images with each other. We’ll take you through all the steps required to create your own anonymous album (anonymous meaning no sign-ins required), implement methods to take or add photos from the device, and upload/download the images from Imgur into the photos page! <strong>Just a note</strong>, when adding any photos to Imgur this way, they are public for the world to see – but only the users of your app will be able to contribute to the album!
                </p>
            </div>
			<div class="row">
				<a class="btn2" style="text-align: center; min-width:11.5em"           href="https://github.com/Microsoft/UWPQuickStart/archive/imgur-integration.zip">Download Code</a>
                <!--div><p>Here is the link to download the solution for this feature.</p></div>	
                
                <div class="row">		
                    <div class="col-md-8"></div>
                    <div class="col-md-4">
                        <a class="btn2" style="text-align: center; min-width:11.5em"           href="https://github.com/Microsoft/UWPQuickStart/archive/imgur-integration.zip">Download Code</a>
                </div>	
                </div-->
			</div>


            <span class="doc-fragment-anchor" id=link-1"></span>
            <hr id="Getting-imgur-key-anchor">
            <div class="row" id="Getting-imgur-key">
                <h2>
                    Prerequisite: Getting Imgur API Key
                </h2>
                <h1></h1>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p>The first thing we have to do is register our application on Imgur to get our API Keys. When you sign up, you should get an email with the Client ID and Client Secret. Since we are trying to avoid any authentication (signing in), we should only need to use our Client ID – but keep both values handy just in case! To register, click <a href="https://api.imgur.com/#registerapp">here</a>.</p>
                </div>
            </div>

            <div>
                <div class="row" style="height: 10px">
            </div>

            <div class="row">
                <div class="col-md-12">
					<a href="http://microsoft.github.io/UWPQuickStart/images/online-image-sync/a-step-1.png" target="_blank"><img src="/UWPQuickStart/images/online-image-sync/a-step-1.png"/></a>

                </div>
            </div>

            <span class="doc-fragment-anchor" id="link-2"></span>
            <hr id="Download-source-anchor">
            <div class="row" id="Download-source">
                <h2>
                    Download and Update Source
                </h2>
                <h1></h1>
            </div>
            <div class="row">
                <div class="number_circle" style="margin-top: 5px">1</div>
                <div class="col-md-7 getting-started-text">
                    <p>Now that we have our Imgur API Client Key, we can download the source code that will contain the Imgur interaction methods. You can find that code in our repo in the <strong>PhotoStreamUtil.cs</strong> class <a href="https://github.com/Microsoft/UWPQuickStart/blob/imgur-integration/src/UWPQuickStart/Utils/PhotoStreamUtil.cs">here</a>. Go ahead and download this file and add it to your utils folder in your project. You can right click on <strong>Utils</strong>, click <strong>Add</strong> and then <strong>Existing item...</strong> Then select the file you just downloaded. Alternatively, add a new class named <strong>PhotoStreamUtil.cs</strong> and copy and paste the code in.</p>
                </div>
                <div class="col-md-5">
                    <a href="http://microsoft.github.io/UWPQuickStart/images/online-image-sync/b-step-1.png" target="_blank"><img src="/UWPQuickStart/images/online-image-sync/b-step-1.png" ></a>
                </div>
            </div>

            <div>
                <div class="row" style="height: 50px">
            </div>

             <div class="row">
                <div class="number_circle" style="margin-top: 5px">2</div>
                <div class="col-md-12 getting-started-text">
                    <p>Once <strong>PhotoStreamUtil.cs</strong> is a part of your project, go ahead and open it up to view the code. At the top of the class, you'll notice there are three private string constants that are missing the right information. We can already fill in one piece of information though - the <strong>ImgurApiClientId</strong> is something that we got when we registered our application with Imgur. Take the <strong>client_id</strong> provided when you registered with Imgur and copy and paste it to be the value of the <strong>ImgurApiClientId</strong> string.</p>
                </div>
            </div>


            <div>
                <div class="row" style="height: 10px"/>
            </div>

            <div class="row">
                <div class="col-md-12 getting-started-text">
                      <pre class="prettyprint"><code class="language-cs">internal class PhotoStreamUtil{
        private const string ImgurApiClientId = "ENTER IMGUR API CLIENT ID HERE";
        private const string AlbumDeleteHash = "ENTER ALBUM DELETE HASH HERE";
        private const string AlbumId = "ENTER ALBUM ID HERE";
...}        
                  </code></pre>
            </div>
            </div>

            <div>
                <div class="row" style="height: 50px"/>
            </div>

            <div class="row">
                <div class="number_circle" style="margin-top: 5px">3</div>
                <div class="col-md-12 getting-started-text">
                    <p>Now that we have our Imgur client ID set, the only remaining info we need is an album ID and an album delete hash. The ID is what will let people view the photos, and the delete hash will be our <strong>private</strong> key that will let us (and only us) contribute to the album. To create an album, first open up <strong>PhotoStreamModel.cs</strong> and find the <strong>InitializePhotoCollection()</strong> method. Since we're going to be getting all of our images from Imgur going forward, just go ahead and delete the whole contents of the method. Inside of the method, add the following line of code: <code>await PhotoStreamUtil.CreateAlbum();</code>. Since this is an asynchronous method, you'll also need to add an async identifier to the method signature - it should now be: <code>public async void InitializePhotoCollection()</code>. Finally you'll need to add the following using statement to the top of the class: <code>using UWPQuickStart.Utils;</code>.</p>
                </div>
            </div>

            <div>
                <div class="row" style="height: 50px"/>
            </div>

            <div class="row">
                <div class="number_circle" style="margin-top: 5px">4</div>
                <div class="col-md-7 getting-started-text">
                    <p>In order for us to record the album ID and album delete hash, we'll need to review the response given to use by the Imgur REST API call to create the album. The easiest way for us to do this with the current setup is to just set a breakpoint on the <code>CreateAlbum()</code> method call you just added. To add a breakpoint, you can right click on that line of code, find <strong>Breakpoint</strong> and click <strong>Insert Breakpoint</strong>. Now, press F5 to run the code. Navigate to the <strong>Photos</strong> page in the app by using the hamburger menu.</p>
                </div>
                <div class="col-md-5">
                    <a href="http://microsoft.github.io/UWPQuickStart/images/online-image-sync/b-step-7.png" target="_blank"><img src="/UWPQuickStart/images/online-image-sync/b-step-7.png"></a>
                </div>
            </div>

            <div>
                <div class="row" style="height: 50px"/>
            </div>

            <div class="row">
                <div class="number_circle" style="margin-top: 5px">5</div>
                <div class="col-md-7 getting-started-text">
                    <p>The breakpoint should immediately be triggered when you navigate to the <strong>Photos</strong> page. Press F11 to step into the code and the <code>CreateAlbum</code> method should be triggered in the <strong>PhotoStreamUtil.cs</strong> class that we added. Add another breakpoint to the very end of the method - on the curly bracket - and hit F5 to let the code resume. Once the next breakpoint is hit, find your Locals inspector. This is at the bottom of your editor by default, but you can open it via Quick Launch by pressing Ctrl + Q and typing <strong>Locals</strong>. In your Locals inspector, you should see both <strong>response</strong> and <strong>content</strong>. To the right of <strong>content</strong> you should see a magnifying glass. Click that and then click <strong>JSON Visualizer</strong>. Expand the data tab and you will have both your album delete hash and album ID!</p>
                </div>
                <div class="col-md-5">
                   <a href="http://microsoft.github.io/UWPQuickStart/images/online-image-sync/b-step-5.png" target="_blank"><img src="/UWPQuickStart/images/online-image-sync/b-step-5.png"/></a>
                </div>
            </div>

            <div>
                <div class="row" style="height: 10px"/>
            </div>

            <div class="row">
                <div class="col-md-12 getting-started-text">
                   <a href="http://microsoft.github.io/UWPQuickStart/images/online-image-sync/b-step-4.png" target="_blank"><img src="/UWPQuickStart/images/online-image-sync/b-step-4.png"/></a>
                </div>
            </div>

            <div>
                <div class="row" style="height: 50px"/>
            </div>

             <div class="row">
                <div class="number_circle" style="margin-top: 5px">6</div>
                <div class="col-md-12 getting-started-text">
                    <p>The last change we need to make to the source is to update the <code>AlbumDeleteHash</code> and <code>AlbumId</code> properties in the <strong>PhotoStreamUtil.cs</strong> class. Replace the values of both of these properties with the delete hash and album ID retrieved in the last step.</p>
                </div>
            </div>
            
            <div>
                <div class="row" style="height: 10px"/>
            </div>

            <div class="row">
                <div class="col-md-12 getting-started-text">
                      <pre class="prettyprint"><code class="language-cs">internal class PhotoStreamUtil{
        private const string ImgurApiClientId = "HIDDEN";
        private const string AlbumDeleteHash = "g7CjQyC08jgDZVl";
        private const string AlbumId = "Pq4t0";
...}</code></pre>
            </div>
            </div>

            <span class="doc-fragment-anchor" id="link-3"></span>
            <hr id="Add-pictures-anchor">
            <div class="row" id="Add-pictures">
                <h2>
                    Add Pictures!
                </h2>
            </div>
            <h1></h1>
            <div class="row">
                <div class="number_circle" style="margin-top: 5px">1</div>
                <div class="col-md-12 getting-started-text">
                    <p>We're almost there! All that remains is to enable our users to add pictures, and make sure we retrieve pictures from the right source - in this case, Imgur! To start with, let's make sure our photos are getting initialized from the right place. In the <strong>PhotoStreamModel.cs</strong> class, let's update the <code>public async void InitializePhotoCollection()</code> method. Let's delete the line that we added earlier. Since our album is already created, we don't need to create albums anymore. Replace it with <code>await PhotoStreamUtil.GetImagesFromImgur(this);</code>.</p>
                </div>
            </div>
            
            <div>
                <div class="row" style="height: 10px"/>
            </div>

            <div class="row">
                <div class="col-md-12 getting-started-text">
                    <pre class="prettyprint"><code class="language-cs">public async void InitializePhotoCollection(){
    await PhotoStreamUtil.GetImagesFromImgur(this);
}
</code></pre>
                </div>
            </div>

            <div>
                <div class="row" style="height: 50px"/>
            </div>

             <div class="row">
                <div class="number_circle" style="margin-top: 5px">2</div>
                <div class="col-md-12 getting-started-text">
                    <p>Now let's make it so our users can add photos. In the <strong>Photos.xaml</strong> page, let's add a new <strong>Grid RowDefinition</strong> with height Auto. Next we'll add a <strong>CommandBar</strong> control to our new row with two <strong>AppBarButton</strong> controls. One for taking a picture with my device's camera, and one for choosing a file that is already on my device. We can make the background of our <strong>CommandBar</strong> the same as our buttons for consistency by adding a <code>Background="{StaticResource ButtonBrush}"</code> property. To style the <strong>AppBarButton</strong> controls, we can assign the following properties. For the first button -
                    <ul>
                        <li><p><code>Icon="Camera"</code></p></li>
                        <li><p><code>Label="Take Picture"</code></p></li>
                        <li><p><code>Click="CameraButton_Click"</code></p></li>
                    </ul> <p>and for the second button -</p>
                    <ul>
                        <li><p><code>Icon="OpenFile"</code></p></li>
                        <li><p><code>Label="Add Picture"</code></p></li>
                        <li><p><code>Click="AddPhotoButton_Click"</code></p></li>
                    </ul></p>
                    <p>The final XAML snippet will look like the below.</p>
                </div>
            </div>

            <div>
                <div class="row" style="height: 10px"/>
            </div>

             <div class="row">
                 <div class="col-md-12 getting-started-text">
                	    <pre class="prettyprint"><code class="language-xml">...&lt;Grid.RowDefinitions&gt;
    &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
    &lt;RowDefinition Height=&quot;*&quot;/&gt;
    &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
&lt;/Grid.RowDefinitions&gt;
&lt;CommandBar Background=&quot;{StaticResource ButtonBrush}&quot Grid.Row=&quot;2&quot;&gt;
    &lt;AppBarButton Icon=&quot;Camera&quot Label=&quot;Take Picture&quot Click=&quot;CameraButton_Click&quot;&gt;
    &lt;AppBarButton Icon=&quot;OpenFile&quot Label=&quot;Add Picture&quot Click=&quot;AddPhotoButton_Click&quot;&gt;
&lt;/CommandBar&gt;...</code></pre>
                </div>
            </div>

            <div>
                <div class="row" style="height: 50px"/>
            </div>

             <div class="row">
                <div class="number_circle" style="margin-top: 5px">3</div>
                <div class="col-md-12 getting-started-text">
                    <p>Now that we have our buttons, we just need to hook them up to something. You can copy and paste the three methods below at the end of the <strong>Photos.xaml.cs</strong> class. They should follow the <code>PhotoFlipViewMode_Checked</code> method. You'll also need to update the using statements at the top of your class.
                </div>
            </div>
            <div>
                <div class="row" style="height: 10px"/>
            </div>
             <div class="row">
                <div class="col-md-12 getting-started-text">
                    <pre class="prettyprint"><code class="language-cs">using System;
using System.ComponentModel;
using System.IO;
using Windows.Media.Capture;
using Windows.Storage;
using Windows.Storage.Pickers;
using Windows.Storage.Streams;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using UWPQuickStart.Models;
using UWPQuickStart.Utils;
...
private async void CameraButton_Click(object sender, RoutedEventArgs e){
    CameraCaptureUI captureUI = new CameraCaptureUI();
    captureUI.PhotoSettings.Format = CameraCaptureUIPhotoFormat.Jpeg;
    StorageFile photo = await captureUI.CaptureFileAsync(CameraCaptureUIMode.Photo);
    SavePhoto(photo);
}
private async void AddPhotoButton_Click(object sender, RoutedEventArgs e){
    FileOpenPicker filePicker = new FileOpenPicker();
    
    filePicker.FileTypeFilter.Add(".jpeg");
    filePicker.FileTypeFilter.Add(".png");
    filePicker.FileTypeFilter.Add(".bmp");
    filePicker.FileTypeFilter.Add(".jpg");
    
    StorageFilePhoto photo = await filePicker.PickSingleFileAsync();
    SavePhoto(photo);
}                        
private async void SavePhoto(StorageFile photo)
{
    if(photo == null)
    {
        //User cancelled photo capture
        return;
    }
    IRandomAccessStream stream = await photo.OpenAsync(FileAccessMode.Read);
    await PhotoStreamUtil.AddImage(stream.AsStream(), _photoStreamModel);
}</code></pre>
                </div>
            </div>

            <div>
                <div class="row" style="height: 50px"/>
            </div>

            <div class="row">
                <div class="number_circle" style="margin-top: 5px">4</div>
                <div class="col-md-7 getting-started-text">
                    <p>Now run the app! You should be able to add photos from your device or take photos with your device's camera via the command bar at the bottom. These photos will automatically upload to your  anonymous Imgur album. After the upload has completed, all users of your application should be able to see the photos!</p>
                </div>
                <div class="col-md-5">
                    <a href="http://microsoft.github.io/UWPQuickStart/images/online-image-sync/c-step-4.png" target="_blank"><img src="/UWPQuickStart/images/online-image-sync/c-step-4.png"/></a>
                </div>
            </div>
			<!--hr id="Download-Solution-anchor">
            <div class="row" id="Download-Solution">
                <h2>
                    Download Solution
                </h2>
                <h1></h1>
            </div>
			<div class="row">
			<div class="col-md-7 getting-started-text">
                    <p>Here is the link to download the solution for this feature.</p>
			</div>
			<div class="col-md-5">
				<a class="btn2" style="text-align: center; min-width:11.5em" href="https://github.com/Microsoft/UWPQuickStart/archive/imgur-integration.zip">Download zip</a>
			</div>
			</div-->

        </div>
    </div>
    </div>
    </div>
    <hr/>
    <!--section>
      <footer class="site-footer">
        <span class="site-footer-owner">This <a href="http://microsoft.github.io/UWPQuickStart/">UWP Quick Start guide</a> is maintained by <a href="https://github.com/Microsoft">Microsoft</a>.</span>
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>
    </section-->
  </body>

</html>
